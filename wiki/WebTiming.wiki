#summary Web timing documentation
#labels Documentation,Featured

= Quick start quide =

  * Change the key ($secret) from post.php
  * Upload livetiming folder into your web server
  * Set the URL to post.php as your Post URL in the options window and use the same key
  * If necessary add writing permissions to cache folder (chmod 777)

= Web Timing =

If you have a web server with PHP support you can use web timing to deliver race standings live to your audience. The system works so that iRTVO sends HTTP POST request to the PHP script, which then saves the data into disk. Users then load this data using JavaScript AJAX compile it into a list. iRTVO sends data out with maximum of 1 request per second, the user side updates much slower 5-30 seconds depending on the setup.

= Setup =

== post.php ==

Post.php is script that saves the data from iRTVO into the web server. Authentication is done with simple pre-shared key. Sent data is stored in cache folder where it's read by users.

First lines of post.php hold the configuration parameters.

=== secret ===

This is the key you've set on iRTVO options window.

=== cachedir ===

This is the directory where json files are stored. This script must have writing access to this directory.

== livetiming.js ==

Web timing can be configured modifying the `livetiming.js`. At the beginning of the file there's a header `CONFIGURATION` which signifies the start of the configuration parameters and respectively `CONFIGURATION ENDS` end of it.

=== Cols ===
This sets which columns are shown in the listing. Possible values are:

|| Value || Explanation ||
|| pos || Position ||
|| numberPlate || Car number ||
|| name || Driver name ||
|| car || Car name ||
|| completedLaps || Number of laps completed so far ||
|| fastLap || Time of the fastest lap in this session ||
|| previouslap || Time of the previous completed lap in this session ||
|| diff || Time or lap difference to leader ||
|| gap || Time difference to driver ahead ||

=== colNames ===
This sets the headers for the columns set on `Cols`. Number of items should be the same as in `Cols`.

=== updateFreqStandings ===
This is the frequency new updates are checked in seconds. If you expect large crowds use big values like 20-40. For smaller amount of users you can go as low as 2.

=== updateFreqSessions ===
This sets how often session info is updated (flags, current lap, etc). By default it's twice larger than `updateFreqStandings`.

=== cachedir ===
This sets the directory where json files are looked for. Use the same values as in post.php